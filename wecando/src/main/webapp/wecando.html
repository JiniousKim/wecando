<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="Dashboard">


<title>WECANDO</title>

<!-- Bootstrap core CSS -->
<link href="css/bootstrap.css" rel="stylesheet">
<!--external css-->
<link href="font-awesome/css/font-awesome.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="css/zabuto_calendar.css">
<link rel="stylesheet" type="text/css"
  href="js/gritter/css/jquery.gritter.css" />
<link rel="stylesheet" type="text/css" href="lineicons/style.css">
<link rel="shortcut icon" type="image/x-icon" href="img/logo.png" />

<!-- Custom styles for this template -->
<link href="css/style.css" rel="stylesheet">
<link href="css/style-responsive.css" rel="stylesheet">
<link rel="stylesheet" type="text/css"
  href="lib/sweetalert/sweetalert.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="js/chart-master/Chart.js"></script>

</head>
<body>
  <div id="login-page">
    <div class="container">
      <!-- Modal -->
      <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog"
        id="myModal1" class="modal fade">
        <form class="form-login">
          <div class="modal-header" style="background-color: #2b4e55;">
            <h2 style="background-color: #2b4e55;" class="form-login-heading">sign
              in now</h2>
          </div>
          <div class="login-wrap">
            <div class="input-ikon">
              <i class='fa fa-user sc'></i>
            </div>
            <input type="text" id="m_email" class="f-c i-t"
              placeholder="User ID" autofocus> <br>
            <div class='input-ikon2'>
              <i class='fa fa-lock sc'></i>
            </div>
            <input type="password" id="m_password" class="f-c i-t"
              placeholder="Password">
            <div style='margin-top: 30px;'>
              <div class='b-s'>
                <button class="btn btn-block bh" type="button"
                  onclick="login();">LOGIN</button>
              </div>
              <div class="b-s1">
                <button type='button' class="btn bh btn-block" onclick="join();">SIGN
                  UP</button>
              </div>
              <hr>
            </div>
          </div>
        </form>
      </div>
      <!-- modal -->
    </div>
  </div>

  <section id="container" class="sidebar-closed">
    <header class="header black-bg">
      <div class="sidebar-toggle-box">
        <div class="fa fa-bars tooltips" data-placement="right"
          data-original-title="Toggle Navigation"></div>
      </div>
      <a href="wecando.html" class="logo"> <img id="wecando_white"
        src="img/wecando_white.png">
      </a>
      
      <!-- login 버튼 스크립트로 내려서 login and logout 구현 -->
      <div class="top-menu" id='login_ava'></div>
    </header>
    <aside>
      <div id="sidebar" class="nav-collapse">
        <ul class="sidebar-menu" id="nav-accordion">
          <li class="sub-menu"><a href="javascript:;"> <i
              class="fa fa-calendar"></i> <span>예약 정보</span>
          </a>
            <ul class="sub" id='sub_m'>
              <li><a href="info/ClientCurrentReserveList.html">내 예약정보</a></li>
              <li><a href="info/ClientLastList.html">지난 예약정보</a>
            </ul></li>

          <li class="sub-menu"><a href="javascript:;"> <i
              class="fa fa-user"></i> <span>마이 페이지</span>
          </a>
            <ul class="sub" id='sub_menu'>
              <li><a href="info/memberInfo.html">내 정보</a></li>
            </ul></li>
        </ul>
      </div>
    </aside>
    <section class='wrapper' id="main-content">
        <div class="col-lg-3 ds">
          <!-- / calendar -->
          <h3>지역 선택</h3>
          <div class="row mt map">
           <img class='location_seoul' src="img/location/seoul.png">
           <img id='dobong' style='display:none;' class='location_seoul_gu' src="img/location/dobong.png">
           <img id='dongdaemun' style='display:none;' class='location_seoul_gu' src="img/location/dongdaemun.png">
           <img id='dongjak' style='display:none;' class='location_seoul_gu' src="img/location/dongjak.png">
           <img id='eunpyeong' style='display:none;' class='location_seoul_gu' src="img/location/eunpyeong.png">
           <img id='gangbuk' style='display:none;' class='location_seoul_gu' src="img/location/gangbuk.png">
           <img id='gangdong' style='display:none;' class='location_seoul_gu' src="img/location/gangdong.png">
           <img id='gangnam' style='display:none;' class='location_seoul_gu' src="img/location/gangnam.png">
           <img id='gangseo' style='display:none;' class='location_seoul_gu' src="img/location/gangseo.png">
           <img id='geumcheon' style='display:none;' class='location_seoul_gu' src="img/location/geumcheon.png">
           <img id='guro' style='display:none;' class='location_seoul_gu' src="img/location/guro.png">
           <img id='gwanak' style='display:none;' class='location_seoul_gu' src="img/location/gwanak.png">
           <img id='gwangjin' style='display:none;' class='location_seoul_gu' src="img/location/gwangjin.png">
           <img id='jongno' style='display:none;' class='location_seoul_gu' src="img/location/jongno.png">
           <img id='junggu' style='display:none;' class='location_seoul_gu' src="img/location/junggu.png">
           <img id='jungnang' style='display:none;' class='location_seoul_gu' src="img/location/jungnang.png">
           <img id='mapo' style='display:none;' class='location_seoul_gu' src="img/location/mapo.png">
           <img id='nowon' style='display:none;' class='location_seoul_gu' src="img/location/nowon.png">
           <img id='seocho' style='display:none;' class='location_seoul_gu' src="img/location/seocho.png">
           <img id='seodaemun' style='display:none;' class='location_seoul_gu' src="img/location/seodaemun.png">
           <img id='seongbuk' style='display:none;' class='location_seoul_gu' src="img/location/seongbuk.png">
           <img id='seongdong' style='display:none;' class='location_seoul_gu' src="img/location/seongdong.png">
           <img id='songpa' style='display:none;' class='location_seoul_gu' src="img/location/songpa.png">
           <img id='ueongdeungpo' style='display:none;' class='location_seoul_gu' src="img/location/ueongdeungpo.png">
           <img id='yangcheon' style='display:none;' class='location_seoul_gu' src="img/location/yangcheon.png">
           <img id='yongsan' style='display:none;' class='location_seoul_gu' src="img/location/yongsan.png">
           <div id='gu-btn-group'>
               <button value="도봉구" id='dobong-btn' class='gu-btn' style='left:181px; top:38px;' type="button">도봉구</button>
               <button value="노원구" id='nowon-btn' class='gu-btn' style='left:181px; top:60px;' type="button">노원구</button>
               <button value="강북구" id='gangbuk-btn' class='gu-btn' style='left:100px; top:59px;' type="button">강북구</button>
               <button value="성북구" id='seongbuk-btn' class='gu-btn' style='left:70px; top:90px;' type="button">성북구</button>
               <button value="은평구" id='eunpyeong-btn' class='gu-btn' style='left:-22px; top:63px;' type="button">은평구</button>
               <button value="종로구" id='jongno-btn' class='gu-btn' style='left:-22px; top:103px;' type="button">종로구</button>
               <button value="서대문구" id='seodaemun-btn' class='gu-btn' style='left:-86px; top:103px;' type="button">서대문구</button>
               <button value="중랑구" id='jungnang-btn' class='gu-btn' style='left:-6px; top:90px;' type="button">중랑구</button>
               <button value="동대문구" id='dongdaemun-btn' class='gu-btn' style='width:40px; left:-73px; top:108px;' type="button">동대문구</button>
               <button value="강서구" id='gangseo-btn' class='gu-btn' style='left:26px; top:85px;' type="button">강서구</button>
               <button value="마포구" id='mapo-btn' class='gu-btn' style='left:51px; top:85px;' type="button">마포구</button>
               <button value="중구" id='junggu-btn' class='gu-btn' style='left:85px; top:90px;' type="button">중구</button>
               <button value="성동구" id='seongdong-btn' class='gu-btn' style='left:86px; top:99px;' type="button">성동구</button>
               <button value="광진구" id='gwangjin-btn' class='gu-btn' style='left:86px; top:103px;' type="button">광진구</button>
               <button value="강동구" id='gangdong-btn' class='gu-btn' style='left:95px; top:98px;' type="button">강동구</button>
               <button value="강남구" id='gangnam-btn' class='gu-btn' style=' top:145px;' type="button">강남구</button>
               <button value="송파구" id='songpa-btn' class='gu-btn' style='left:2px; top:130px;' type="button">송파구</button>
               <button value="용산구" id='yongsan-btn' class='gu-btn' style='left:-120px; top:110px;' type="button">용산구</button>
               <button value="양천구" id='yangcheon-btn' class='gu-btn' style='left:50px; top:102px;' type="button">양천구</button>
               <button value="영등포구" id='ueongdeungpo-btn' class='gu-btn' style='width:35px;left:52px; top:102px;' type="button">영등포구</button>
               <button value="동작구" id='dongjak-btn' class='gu-btn' style='left:45px; top:116px;' type="button">동작구</button>
               <button value="서초구" id='seocho-btn' class='gu-btn' style='left:60px; top:137px;' type="button">서초구</button>
               <button value="관악구" id='gwanak-btn' class='gu-btn' style='left:-20px; top:147px;' type="button">관악구</button>
               <button value="금천구" id='geumcheon-btn' class='gu-btn' style='width:1px; left:-75px; top:137px;' type="button">금천구</button>
               <button value="구로구" id='guro-btn' class='gu-btn' style='left:-125px; top:120px;' type="button">구로구</button>
           </div>
           
           </div>
           <div style='height: 30px;'>
           </div>
           <h3>날짜 선택</h3>
          <!-- CALENDAR-->
          <div id="calendar" class="mb">
            <div class="panel green-panel">
              <div class="panel-body">
                <div id="date-popover" class="popover top"
                  style="cursor: pointer; disadding: block; margin-left: 33%; margin-top: -50px; width: 175px;">
                  <div class="arrow"></div>
                  <h3 class="popover-title" style="disadding: none;"></h3>
                  <div id="date-popover-content" class="popover-content"></div>
                </div>
                <div id="my-calendar"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3 ds dj">
          <div class="btn-group" id='eventlist' style='top:30px;'>
              <div class='searchBox'>
                 <input id='autocomplete' class='search_text' type="text" name="search" placeholder="학교 검색" onkeypress="onkeyPress()">
              </div>
            <select id='event_list' name='ec' class='dropdown-toggle' data-toggle='dropdown' name='event_code'>
              <option class='dropdown-menu' value='' selected>종목 선택</option>
            </select>
              
              
          </div>
          <div class='wecando'>
            <img style='width:400px; height:100px;' src="img/black_logo.png">
          </div>
          <hr>
          <div class='defaultDate'><input id='chooseDate' readonly></div>
          <div id='example'></div>
          <div id='sch_list'></div>
          <div id='search_sch_list'></div>
        </div>
        <!-- /col-lg-3 -->
    </section>
  </section>

  <script src="js/jquery.js"></script>
  <script src="js/jquery-1.8.3.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script class="include" type="text/javascript"
    src="js/jquery.dcjqaccordion.2.7.js"></script>
  <script src="js/jquery.sparkline.js"></script>
  <script src="js/jquery.scrollTo.min.js"></script>
  
  <script src="js/common-scripts.js"></script>

  <script type="text/javascript" src="js/gritter/js/jquery.gritter.js"></script>
  <script type="text/javascript" src="js/gritter-conf.js"></script>

  <script src="js/zabuto_calendar.js"></script>
  <script src="lib/sweetalert/sweetalert.min.js"></script>
  <script src='lib/jquery.min.js'></script>
  <script>
    $(function(){
      $.ajax({
        url : contextRoot + '/info/ajax/AllschoolList.do',
        type : 'post',
        dataType : 'json',
        success : function(resultObj) {
          var autocomplete_text = resultObj.stringList;
          $("#autocomplete").autocomplete({
             source: autocomplete_text
          });
        }
      })
    })
  </script>
  <script type="application/javascript">
    var date;
    var gu_data = new FormData();
    var pageNum;
    var gu_list = new Array();
    // 구 검색 무한 스크롤
    $("#sch_list").scroll(function() {
      var scrollHeight = $("#sch_list").prop("scrollHeight") - $("#sch_list").scrollTop();
      var documentHeight = $("#sch_list").height();
    
      
      if (scrollHeight == documentHeight) {
           pageNum++;
           alert(pageNum);
           loadSchoolList();
      }
    });
    
    $("#search_sch_list").scroll(function() {
      var scrollHeight = $("#search_sch_list").prop("scrollHeight") - $("#search_sch_list").scrollTop();
      var documentHeight = $("#search_sch_list").height();
      
      if (scrollHeight == documentHeight) {
         //loadSearchSchoolList(); 
      }
    });
     
    $(document).ready(function () {
      $("#date-popover").popover({html: true, trigger: "manual"});
      $("#date-popover").hide();
      $("#date-popover").click(function (e) {
          $(this).hide();
      });
      $("#my-calendar").zabuto_calendar({
          action: function () {
                var day = $("#" + this.id).data("date");
                var date = new Date(day).getDay();
                console.log(date);
                if (date == 0 || date == 6) {
                swal('Good', '이용 가능한 날짜 입니다.', 'success');  
                document.getElementById('chooseDate').value = day;
                } else {
                    swal('Oops...', '이용이 불가능한 날짜 입니다.', 'error');
                }
          }
      });
      
      $("#search_sch_list").css('display', 'none');
      var today = new Date();
      var dd = today.getDate();
      var mm = today.getMonth()+1; //January is 0!
      var yyyy = today.getFullYear();

      if(dd<10) {
          dd='0'+dd
      } 

      if(mm<10) {
          mm='0'+mm
      }
      

     date = yyyy + '-' + mm + '-' + dd;

     document.getElementById('chooseDate').value = date;
        
     $.ajax({
       url : contextRoot + '/info/ajax/eventList.do',
       type : 'post',
       dataType : 'json',
       cache : false,
       processData : false,
       contentType : false,
       async : false,
       success : function(resultObj) {
         var list = $('#event_list');
         for(var event of resultObj.eventList) {
            list.append("<option value='" + event.event_code + "'>" + event.event_name + "</option>")
         }
       }
    })
        
    /*  <!-- 종목 등록 -->
     <!--
     $.ajax({
       url : contextRoot + '/member/ajax/setset.do',
       type : 'post',
       dataType : 'json',
       cache : false,
       success : function(e) {
         
       }
     }) --> */
   });
    
  $.ajax({
    url : contextRoot + '/auth/ajax/check_session.do',
    type : 'post',
    dataType : 'json',
    cache : false,
    processData : false,
    contentType : false,
    async : false,
    success : function(resultObj) {
        var loginAva = $('#login_ava');
        var sM = $('#sub_menu');
        var sub = $('#sub_m');
      var ajaxresult = resultObj;
      if (ajaxresult.status == 'failure') {
        loginAva.append("<ul class='nav pull-right top-menu'>"
         + "<li><a class='logout' data-toggle='modal'"
         + "href='wecando.html#myModal1'>Login</a></li>"
         + "</ul>")
      } else {
         loginAva.append("<ul class='nav pull-right top-menu'>"
             + "<li><a class='logout'"
             + "href='' onclick='logout();'>Logout</a></li>"
             + "</ul>")
      } 
      if (ajaxresult.grade == 2) {
          sM.append(
           "<li><a href='info/register_school.html'>학교 정보</a></li>"   
          )
          sub.append(
          "<li><a href='info/ClientReserveList.html'>신청된 정보</a></li>"
            )
       }
     }
   })
  </script>
  <script>
  $(document).on("click", "#dddd", function() {
      date = 'asdf';
      $('#sch_list').append(date);
      document.getElementById('chooseDate').value = date;
  })
  
  $('#myModal1').on('hide.bs.modal', function (e) {
    $('#m_email').html('');
    $('#m_password').html('');
    $('#m_email').val('');
    $('#m_password').val('');
  })
    
   $(document).on("click", "#gu-btn-group", function(e){
      var ID = e.target.getAttribute('id');
      var gu = ID.replace('-btn','');
      if( $('#' + gu).attr('class') == 'location_seoul_gu clicked') {
          $('#' + gu).fadeOut(1000);
          $('#' + ID).css('background-color','');
          $('#' + ID).css('color', 'black');
          $('#' + gu).removeClass('clicked');
          
          for(var i=0; i < gu_list.length; i++) {
            if (gu_list[i] == $('#' + ID).val()) {
              delete gu_list[i];
            }
          }
      } else {
          $('#' + gu).fadeIn(1000);
          $('#' + ID).css('background-color','#ae1630');
          $('#' + ID).css('color', 'white');
          $('#' + gu).addClass('clicked');
          gu_list.push($('#' + ID).val());
      }
      
      pageNum = 1;
      $('#sch_list').val('');
      loadClickSchoolList();
  })
     
    // 구 검색 스크롤 끝나면 호출
    function loadSchoolList() {
      if ($("select[name=ec]").val() == '') {
        swal('Oops...', '종목을 선택하지 않았어용~', 'error');
      } else {
        var gu_data = new FormData();
        gu_data.append('event_date',$('#chooseDate').val());
        gu_data.append('gu_list', gu_list);
        gu_data.append('event_code', $("select[name=ec]").val());
           jQuery.ajaxSettings.traditional = true;
          $.ajax({
           url : contextRoot + '/info/ajax/search_gu.do',
           type : 'post',
           dataType : 'json',
           contentType : false,
           processData : false,
           data : gu_data,
           success : function(resultObj) {
             var schEventList = resultObj.schEventList;
             console.log(schEventList);
             $('#search_sch_list').css('display', 'none');
             $('#sch_list').css('display', '');
             var show = $('#sch_list');
             for (var schEvent of schEventList) {
               document.getElementById('chooseDate').value = schEvent.event_date;
             console.log(schEvent);
             show.append("<form action='http://localhost:8080/wecando/reserve/ajax/reserveInfo.do' method='post'>" +
              "<input type='hidden' name='select_sch_name' value='" + schEvent.sch_name + "'>" +
              "<input type='hidden' name='select_sch_num' value='" + schEvent.sch_num + "'>" +
              "<input type='hidden' name='select_sch_location' value='" + schEvent.sch_location + "'>" +
              "<input type='hidden' name='select_sch_tel' value='" + schEvent.sch_tel + "'>" +
              "<input type='hidden' name='select_court_code' value='" + schEvent.court_code + "'>" +
              "<input type='hidden' name='select_court_price' value='" + schEvent.court_price + "'>" +
              "<input type='hidden' name='select_court_cnt' value='" + schEvent.court_cnt + "'>" +
              "<input type='hidden' name='select_court_max' value='" + schEvent.court_max + "'>" +
              "<input type='hidden' name='select_event_date' value='" + schEvent.event_date + "'>" +
              "<input type='hidden' name='select_event_code' value='" + schEvent.event_code + "'>" +
               "   <div class='card_title'>" +
                "          <div class='card_name'><i class='fa fa-university'>&nbsp;<input id='title_school_name' style='border:none;' value='" + schEvent.sch_name + "' readonly></i></div>" + 
                 "</div>" +
              "<div class='card'>" +
               "   <div class='card_photo'> " +
                "  <div class='card_time'><table class='time_table'> " +
                 "       <thead>" +
                  "      <tr>" +
                   "     <th>이용가능 시간</th><th>대관비용</th><th colspan='5px;'>사용가능 여부</th> " +
                    "    </tr></thead><tbody> " + 
                     "   <tr> " +
                      "    <td>&nbsp;&nbsp;&nbsp;06:00 ~ 08:00</td> " +
                      "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                        "  <td><button id='" + schEvent.court_code + "t6_8' value='T06_08' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                        "<button id='" + schEvent.court_code + "t6_8i' class='reserve-btn disabled'>예약 불가</button>" +
                       "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;08:00 ~ 10:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t8_10' value='T08_10' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t8_10i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;10:00 ~ 12:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t10_12' value='T10_12' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t10_12i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;12:00 ~ 14:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t12_14' value='T12_14' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t12_14i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;14:00 ~ 16:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t14_16' value='T14_16' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t14_16i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          " </tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;16:00 ~ 18:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t16_18' value='T16_18' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t16_18i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;18:00 ~ 20:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t18_20' value='T18_20' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t18_20i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;20:00 ~ 22:00</td>" + 
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t20_22' value='T20_22' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t20_22i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "</tbody></table></div></div>" +
                   "</div></form>")
                   ;
                   if (schEvent.t6_8 == '0') {
                       $('#' + schEvent.court_code +'t6_8').css('display','');
                       $('#' + schEvent.court_code +'t6_8i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t6_8').css('display','none');
                     $('#' + schEvent.court_code +'t6_8i').css('display','');
                   }
                   if (schEvent.t8_10 == '0') {
                     $('#' + schEvent.court_code +'t8_10').css('display','');
                     $('#' + schEvent.court_code +'t8_10i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t8_10').css('display','none');
                     $('#' + schEvent.court_code +'t8_10i').css('display','');
                   }
                   if (schEvent.t10_12 == '0') {
                     $('#' + schEvent.court_code +'t10_12').css('display','');
                     $('#' + schEvent.court_code +'t10_12i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t10_12').css('display','none');
                     $('#' + schEvent.court_code +'t10_12i').css('display','');
                   }
                   if (schEvent.t12_14 == '0') {
                     $('#' + schEvent.court_code +'t12_14').css('display','');
                     $('#' + schEvent.court_code +'t12_14i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t12_14').css('display','none');
                     $('#' + schEvent.court_code +'t12_14i').css('display','');
                   }
                   if (schEvent.t14_16 == '0') {
                     $('#' + schEvent.court_code +'t14_16').css('display','');
                     $('#' + schEvent.court_code +'t14_16i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t14_16').css('display','none');
                     $('#' + schEvent.court_code +'t14_16i').css('display','');
                   }
                   if (schEvent.t16_18 == '0') {
                     $('#' + schEvent.court_code +'t16_18').css('display','');
                     $('#' + schEvent.court_code +'t16_18i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t16_18').css('display','none');
                     $('#' + schEvent.court_code +'t16_18i').css('display','');
                   }
                   if (schEvent.t18_20 == '0') {
                     $('#' + schEvent.court_code +'t18_20').css('display','');
                     $('#' + schEvent.court_code +'t18_20i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t18_20').css('display','none');
                     $('#' + schEvent.court_code +'t18_20i').css('display','');
                   }
                   if (schEvent.t20_22 == '0') {
                     $('#' + schEvent.court_code +'t20_22').css('display','');
                     $('#' + schEvent.court_code +'t20_22i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t20_22').css('display','none');
                     $('#' + schEvent.court_code +'t20_22i').css('display','');
                   }
                }
                 
             }
           })
      }
    } 
    
    function loadClickSchoolList() {
      if ($("select[name=ec]").val() == '') {
        swal('Oops...', '종목을 선택하지 않았어용~', 'error');
      } else {
        var gu_data = new FormData();
        gu_data.append('event_date',$('#chooseDate').val());
        gu_data.append('gu_list', gu_list);
        gu_data.append('event_code', $("select[name=ec]").val());
           jQuery.ajaxSettings.traditional = true;
          $.ajax({
           url : contextRoot + '/info/ajax/search_gu.do',
           type : 'post',
           dataType : 'json',
           contentType : false,
           processData : false,
           data : gu_data,
           success : function(resultObj) {
             var schEventList = resultObj.schEventList;
             console.log(schEventList);
             var show = $('#sch_list');
             show.html('');
             show.css('');
             for (var schEvent of schEventList) {
               document.getElementById('chooseDate').value = schEvent.event_date;
             console.log(schEvent);
             show.append("<form action='http://localhost:8080/wecando/reserve/ajax/reserveInfo.do' method='post'>" +
              "<input type='hidden' name='select_sch_name' value='" + schEvent.sch_name + "'>" +
              "<input type='hidden' name='select_sch_location' value='" + schEvent.sch_location + "'>" +
              "<input type='hidden' name='select_sch_tel' value='" + schEvent.sch_tel + "'>" +
              "<input type='hidden' name='select_sch_num' value='" + schEvent.sch_num + "'>" +
              "<input type='hidden' name='select_court_code' value='" + schEvent.court_code + "'>" +
              "<input type='hidden' name='select_court_price' value='" + schEvent.court_price + "'>" +
              "<input type='hidden' name='select_event_date' value='" + schEvent.event_date + "'>" +
              "<input type='hidden' name='select_court_cnt' value='" + schEvent.court_cnt + "'>" +
              "<input type='hidden' name='select_court_max' value='" + schEvent.court_max + "'>" +
              "<input type='hidden' name='select_event_date' value='" + schEvent.event_date + "'>" +
              "<input type='hidden' name='select_event_code' value='" + schEvent.event_code + "'>" + 
              "   <div class='card_title'>" +
                "          <div class='card_name'><i class='fa fa-university'>&nbsp;<input id='title_school_name' style='border:none;' value='" + schEvent.sch_name + "' readonly></i></div>" + 
                 "</div>" +
              "<div class='card'>" +
               "   <div class='card_photo'> " +
                "  <div class='card_time'><table class='time_table'> " +
                 "       <thead>" +
                  "      <tr>" +
                   "     <th>이용가능 시간</th><th>대관비용</th><th colspan='5px;'>사용가능 여부</th> " +
                    "    </tr></thead><tbody> " + 
                     "   <tr> " +
                      "    <td>&nbsp;&nbsp;&nbsp;06:00 ~ 08:00</td> " +
                      "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                        "  <td><button id='" + schEvent.court_code + "t6_8' value='T06_08' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                        "<button id='" + schEvent.court_code + "t6_8i' class='reserve-btn disabled'>예약 불가</button>" +
                       "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;08:00 ~ 10:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t8_10' value='T08_10' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t8_10i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;10:00 ~ 12:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t10_12' value='T10_12' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t10_12i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;12:00 ~ 14:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t12_14' value='T12_14' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t12_14i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;14:00 ~ 16:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t14_16' value='T14_16' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t14_16i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          " </tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;16:00 ~ 18:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t16_18' value='T16_18' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t16_18i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;18:00 ~ 20:00</td> " +
                          "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t18_20' value='T18_20' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t18_20i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "<tr> " +
                          "<td>&nbsp;&nbsp;&nbsp;20:00 ~ 22:00</td>" + 
                          "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                          "<td><button id='" + schEvent.court_code + "t20_22' value='T20_22' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                          "<button id='" + schEvent.court_code + "t20_22i' class='reserve-btn disabled'>예약 불가</button>" +
                          "</td>" +
                          "</tr>" +
                          "</tbody></table></div></div>" +
                   "</div></form>");
                   if (schEvent.t6_8 == '0') {
                       $('#' + schEvent.court_code +'t6_8').css('display','');
                       $('#' + schEvent.court_code +'t6_8i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t6_8').css('display','none');
                     $('#' + schEvent.court_code +'t6_8i').css('display','');
                   }
                   if (schEvent.t8_10 == '0') {
                     $('#' + schEvent.court_code +'t8_10').css('display','');
                     $('#' + schEvent.court_code +'t8_10i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t8_10').css('display','none');
                     $('#' + schEvent.court_code +'t8_10i').css('display','');
                   }
                   if (schEvent.t10_12 == '0') {
                     $('#' + schEvent.court_code +'t10_12').css('display','');
                     $('#' + schEvent.court_code +'t10_12i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t10_12').css('display','none');
                     $('#' + schEvent.court_code +'t10_12i').css('display','');
                   }
                   if (schEvent.t12_14 == '0') {
                     $('#' + schEvent.court_code +'t12_14').css('display','');
                     $('#' + schEvent.court_code +'t12_14i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t12_14').css('display','none');
                     $('#' + schEvent.court_code +'t12_14i').css('display','');
                   }
                   if (schEvent.t14_16 == '0') {
                     $('#' + schEvent.court_code +'t14_16').css('display','');
                     $('#' + schEvent.court_code +'t14_16i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t14_16').css('display','none');
                     $('#' + schEvent.court_code +'t14_16i').css('display','');
                   }
                   if (schEvent.t16_18 == '0') {
                     $('#' + schEvent.court_code +'t16_18').css('display','');
                     $('#' + schEvent.court_code +'t16_18i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t16_18').css('display','none');
                     $('#' + schEvent.court_code +'t16_18i').css('display','');
                   }
                   if (schEvent.t18_20 == '0') {
                     $('#' + schEvent.court_code +'t18_20').css('display','');
                     $('#' + schEvent.court_code +'t18_20i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t18_20').css('display','none');
                     $('#' + schEvent.court_code +'t18_20i').css('display','');
                   }
                   if (schEvent.t20_22 == '0') {
                     $('#' + schEvent.court_code +'t20_22').css('display','');
                     $('#' + schEvent.court_code +'t20_22i').css('display','none');
                   } else {
                     $('#' + schEvent.court_code +'t20_22').css('display','none');
                     $('#' + schEvent.court_code +'t20_22i').css('display','');
                   }
                }
                 
             }
           })
      }
    } 
     
     
    function onkeyPress() {
        if(event.keyCode == 13) {
          var form_data = new FormData();
          
          if ($('#autocomplete').val() == '') {
              swal('Oops...','학교 이름을 입력해주세요', 'error');
          }
          else if ($('#chooseDate').val() == '') {
              swal('Oops...','날짜를 정확하게 입력해주세용!', 'error');
          }
          else if ($('select[name=ec]').val() == '') {
              swal('Oops...', '종목을 선택해 주세용!', 'error');
          }
          else {
          form_data.append("sch_name", $('#autocomplete').val());
          form_data.append("event_date", $('#chooseDate').val());
          form_data.append("event_code", $("select[name=ec]").val());
          $.ajax({
            url : contextRoot + '/info/ajax/search_sch.do',
            type : 'post',
            dataType : 'json',
            contentType : false,
            processData : false,
            data : form_data,
            success : function(resultObj) {
              var schEventList = resultObj.schEventList;
              console.log(schEventList);
              $('#search_sch_list').css('display', '');
              $('#sch_list').css('display', 'none');
              var show = $('#search_sch_list');
              for (var schEvent of schEventList) {
                document.getElementById('chooseDate').value = schEvent.event_date;
              console.log(schEvent);
              show.append("<form action='http://localhost:8080/wecando/reserve/ajax/reserveInfo.do' method='post'>" +
               "<input type='hidden' name='select_sch_name' value='" + schEvent.sch_name + "'>" +
               "<input type='hidden' name='select_sch_location' value='" + schEvent.sch_location + "'>" +
               "<input type='hidden' name='select_sch_tel' value='" + schEvent.sch_tel + "'>" +
               "<input type='hidden' name='select_sch_num' value='" + schEvent.sch_num + "'>" +
               "<input type='hidden' name='select_court_code' value='" + schEvent.court_code + "'>" +
               "<input type='hidden' name='select_court_price' value='" + schEvent.court_price + "'>" +
               "<input type='hidden' name='select_event_date' value='" + schEvent.event_date + "'>" +
               "<input type='hidden' name='select_court_cnt' value='" + schEvent.court_cnt + "'>" +
               "<input type='hidden' name='select_court_max' value='" + schEvent.court_max + "'>" +
               "<input type='hidden' name='select_event_date' value='" + schEvent.event_date + "'>" +
               "<input type='hidden' name='select_event_code' value='" + schEvent.event_code + "'>" + 
               "   <div class='card_title'>" +
                 "          <div class='card_name'><i class='fa fa-university'>&nbsp;<input id='title_school_name' style='border:none;' value='" + schEvent.sch_name + "' readonly></i></div>" + 
                  "</div>" +
               "<div class='card'>" +
                "   <div class='card_photo'> " +
                 "  <div class='card_time'><table class='time_table'> " +
                  "       <thead>" +
                   "      <tr>" +
                    "     <th>이용가능 시간</th><th>대관비용</th><th colspan='5px;'>사용가능 여부</th> " +
                     "    </tr></thead><tbody> " + 
                      "   <tr> " +
                       "    <td>&nbsp;&nbsp;&nbsp;06:00 ~ 08:00</td> " +
                        "   <td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                         "  <td><button id='" + schEvent.court_code + "t6_8' value='T06_08' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                         "<button id='" + schEvent.court_code + "t6_8i' class='reserve-btn disabled'>예약 불가</button>" +
                        "</td>" +
                           "</tr>" +
                           "<tr> " +
                           "<td>&nbsp;&nbsp;&nbsp;08:00 ~ 10:00</td> " +
                           "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                           "<td><button id='" + schEvent.court_code + "t8_10' value='T08_10' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                           "<button id='" + schEvent.court_code + "t8_10i' class='reserve-btn disabled'>예약 불가</button>" +
                           "</td>" +
                           "</tr>" +
                           "<tr> " +
                           "<td>&nbsp;&nbsp;&nbsp;10:00 ~ 12:00</td> " +
                           "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                           "<td><button id='" + schEvent.court_code + "t10_12' value='T10_12' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                           "<button id='" + schEvent.court_code + "t10_12i' class='reserve-btn disabled'>예약 불가</button>" +
                           "</td>" +
                           "</tr>" +
                           "<tr> " +
                           "<td>&nbsp;&nbsp;&nbsp;12:00 ~ 14:00</td> " +
                           "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                           "<td><button id='" + schEvent.court_code + "t12_14' value='T12_14' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                           "<button id='" + schEvent.court_code + "t12_14i' class='reserve-btn disabled'>예약 불가</button>" +
                           "</td>" +
                           "</tr>" +
                           "<tr> " +
                           "<td>&nbsp;&nbsp;&nbsp;14:00 ~ 16:00</td> " +
                           "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                           "<td><button id='" + schEvent.court_code + "t14_16' value='T14_16' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                           "<button id='" + schEvent.court_code + "t14_16i' class='reserve-btn disabled'>예약 불가</button>" +
                           "</td>" +
                           " </tr>" +
                           "<tr> " +
                           "<td>&nbsp;&nbsp;&nbsp;16:00 ~ 18:00</td> " +
                           "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                           "<td><button id='" + schEvent.court_code + "t16_18' value='T16_18' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                           "<button id='" + schEvent.court_code + "t16_18i' class='reserve-btn disabled'>예약 불가</button>" +
                           "</td>" +
                           "</tr>" +
                           "<tr> " +
                           "<td>&nbsp;&nbsp;&nbsp;18:00 ~ 20:00</td> " +
                           "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                           "<td><button id='" + schEvent.court_code + "t18_20' value='T18_20' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                           "<button id='" + schEvent.court_code + "t18_20i' class='reserve-btn disabled'>예약 불가</button>" +
                           "</td>" +
                           "</tr>" +
                           "<tr> " +
                           "<td>&nbsp;&nbsp;&nbsp;20:00 ~ 22:00</td>" + 
                           "<td>&nbsp;&nbsp;&nbsp;" + schEvent.court_price + "원</td> " +
                           "<td><button id='" + schEvent.court_code + "t20_22' value='T20_22' name='select_Time' type='submit' class='reserve-btn'>예약 가능</button>" +
                           "<button id='" + schEvent.court_code + "t20_22i' class='reserve-btn disabled'>예약 불가</button>" +
                           "</td>" +
                           "</tr>" +
                           "</tbody></table></div></div>" +
                    "</div></form>");
                    if (schEvent.t6_8 == '0') {
                        $('#' + schEvent.court_code +'t6_8').css('display','');
                        $('#' + schEvent.court_code +'t6_8i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t6_8').css('display','none');
                      $('#' + schEvent.court_code +'t6_8i').css('display','');
                    }
                    if (schEvent.t8_10 == '0') {
                      $('#' + schEvent.court_code +'t8_10').css('display','');
                      $('#' + schEvent.court_code +'t8_10i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t8_10').css('display','none');
                      $('#' + schEvent.court_code +'t8_10i').css('display','');
                    }
                    if (schEvent.t10_12 == '0') {
                      $('#' + schEvent.court_code +'t10_12').css('display','');
                      $('#' + schEvent.court_code +'t10_12i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t10_12').css('display','none');
                      $('#' + schEvent.court_code +'t10_12i').css('display','');
                    }
                    if (schEvent.t12_14 == '0') {
                      $('#' + schEvent.court_code +'t12_14').css('display','');
                      $('#' + schEvent.court_code +'t12_14i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t12_14').css('display','none');
                      $('#' + schEvent.court_code +'t12_14i').css('display','');
                    }
                    if (schEvent.t14_16 == '0') {
                      $('#' + schEvent.court_code +'t14_16').css('display','');
                      $('#' + schEvent.court_code +'t14_16i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t14_16').css('display','none');
                      $('#' + schEvent.court_code +'t14_16i').css('display','');
                    }
                    if (schEvent.t16_18 == '0') {
                      $('#' + schEvent.court_code +'t16_18').css('display','');
                      $('#' + schEvent.court_code +'t16_18i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t16_18').css('display','none');
                      $('#' + schEvent.court_code +'t16_18i').css('display','');
                    }
                    if (schEvent.t18_20 == '0') {
                      $('#' + schEvent.court_code +'t18_20').css('display','');
                      $('#' + schEvent.court_code +'t18_20i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t18_20').css('display','none');
                      $('#' + schEvent.court_code +'t18_20i').css('display','');
                    }
                    if (schEvent.t20_22 == '0') {
                      $('#' + schEvent.court_code +'t20_22').css('display','');
                      $('#' + schEvent.court_code +'t20_22i').css('display','none');
                    } else {
                      $('#' + schEvent.court_code +'t20_22').css('display','none');
                      $('#' + schEvent.court_code +'t20_22i').css('display','');
                    }
                 }
              }
            })
          }
       }
    }
    
    function logout() {
      $.ajax({
        url : contextRoot + '/auth/ajax/logout.do',
        type : 'post',
        dataType : 'json',
        cache : false,
        success : function(resultObj) {
          var ajaxresult = resultObj.AjaxResult;
          if (ajaxresult.status == 'success') {
            location  .replace("http://localhost:8080/wecando/login.html");
          } else {
            sweetAlert("Oops...", "Logout에 실패하였습니다.", "error");
          }
        }
      })
    }

    function join() {
      location.replace("http://localhost:8080/wecando/loginpage/auth.html");
    }

    function login() {
      var form_data = new FormData();
      form_data.append("m_email", $('#m_email').val());
      form_data.append("m_password", $('#m_password').val());
      $.ajax({
        url : contextRoot + '/auth/ajax/login.do',
        type : 'post',
        dataType : 'json',
        cache : false,
        contentType : false,
        processData : false,
        data : form_data,
        success : function(resultObj) {
          var ajaxResult = resultObj;
          if (ajaxResult.status == 'success') {
            location.replace("http://localhost:8080/wecando/wecando.html");
          } else {
            sweetAlert("Oops...","아이디 또는 비밀번호가 일치하지 않습니다.", "error");
          }
        },
        error : function(resultObj) {
          sweetAlert("Oops...", "아이디 또는 비밀번호가 일치하지 않습니다.","error");
        }
      })
    }
  </script>
</body>
</html>
